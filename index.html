<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>GUNC UN ABV</title>
<style>
body {
    margin: 0;
    background: linear-gradient(135deg, #0f0f1a, #1c1c3a);
    font-family: Arial, sans-serif;
    color: white;
    text-align: center;
}

h1 {
    margin-top: 20px;
}

#timer {
    font-size: 22px;
    margin-top: 10px;
    color: #ff7675;
    font-weight: bold;
}

.game {
    display: flex;
    justify-content: center;
    align-items: flex-end;
    margin-top: 40px;
    gap: 80px;
}

.tower {
    width: 140px;
    height: 320px;
    border: 2px solid #888;
    display: flex;
    flex-direction: column-reverse;
    align-items: center;
    padding-bottom: 10px;
    cursor: pointer;
}

.disk {
    height: 20px;
    margin: 3px 0;
    border-radius: 4px;
}

.disk[data-size="1"] { width: 60px; background: #ff7675; }
.disk[data-size="2"] { width: 75px; background: #74b9ff; }
.disk[data-size="3"] { width: 90px; background: #55efc4; }
.disk[data-size="4"] { width: 105px; background: #ffeaa7; }
.disk[data-size="5"] { width: 120px; background: #a29bfe; }

#message {
    margin-top: 20px;
    font-size: 24px;
    color: gold;
    font-weight: bold;
}
</style>
</head>
<body>

<h1>Tháp Hà Nội - 5 Đĩa</h1>
<p>Chuyển toàn bộ sang cột thứ 3 trong vòng 10 phút.</p>

<div id="timer">Thời gian: 10:00</div>

<div class="game">
    <div class="tower" id="tower1"></div>
    <div class="tower" id="tower2"></div>
    <div class="tower" id="tower3"></div>
</div>

<div id="message"></div>

<script>
const diskCount = 5;
let timeLeft = 600; // 10 phút = 600 giây
let timerInterval;
let gameOver = false;

const towers = [
    document.getElementById("tower1"),
    document.getElementById("tower2"),
    document.getElementById("tower3")
];

let selectedTower = null;

function initGame() {
    towers.forEach(t => t.innerHTML = "");
    document.getElementById("message").textContent = "";
    gameOver = false;

    for (let i = diskCount; i >= 1; i--) {
        const disk = document.createElement("div");
        disk.classList.add("disk");
        disk.dataset.size = i;
        towers[0].appendChild(disk);
    }

    startTimer();
}

function startTimer() {
    clearInterval(timerInterval);
    timeLeft = 600;
    updateTimerDisplay();

    timerInterval = setInterval(() => {
        if (gameOver) return;

        timeLeft--;
        updateTimerDisplay();

        if (timeLeft <= 0) {
            clearInterval(timerInterval);
            gameOver = true;
            document.getElementById("message").textContent = "Hết thời gian.";
        }
    }, 1000);
}

function updateTimerDisplay() {
    const minutes = Math.floor(timeLeft / 60);
    const seconds = timeLeft % 60;
    document.getElementById("timer").textContent =
        "Thời gian: " +
        String(minutes).padStart(2, '0') + ":" +
        String(seconds).padStart(2, '0');
}

function getTopDisk(tower) {
    return tower.lastElementChild;
}

function checkWin() {
    if (towers[2].children.length === diskCount && !gameOver) {
        clearInterval(timerInterval);
        gameOver = true;
        document.getElementById("message").textContent = "GurXrl";
    }
}

towers.forEach(tower => {
    tower.addEventListener("click", () => {
        if (gameOver) return;

        if (!selectedTower) {
            if (tower.children.length > 0) {
                selectedTower = tower;
                tower.style.borderColor = "yellow";
            }
        } else {
            if (selectedTower === tower) {
                selectedTower.style.borderColor = "#888";
                selectedTower = null;
                return;
            }

            const movingDisk = getTopDisk(selectedTower);
            const targetDisk = getTopDisk(tower);

            if (!targetDisk || 
                parseInt(movingDisk.dataset.size) < parseInt(targetDisk.dataset.size)) {
                tower.appendChild(movingDisk);
            }

            selectedTower.style.borderColor = "#888";
            selectedTower = null;
            checkWin();
        }
    });
});

initGame();
</script>

</body>
</html>
